function getContentAPA(a){let b=Cite(a,{type:"string",format:"html",style:"apa",lan:"es"});return"<p>.</p>"===b.get()||"<p></p>"===b.get()||"<p><i></i>. </p>"===b.get()||""===b.get().trim()?"":b.get()}function getFormData(a){var b=a.serializeArray(),c={};return $.map(b,function(a,b){c[a.name]=a.value}),c}tinymce.PluginManager.add("APAFormat",function(a,b){a.addButton("APAFormat",{type:"menubutton",text:"Formato APA",icon:!1,menu:[{icon:"none fontAwesome fa fa-book",text:"Libro",onclick:function(){a.windowManager.open({title:"Generar citas APA para Libro",url:b+"/management/APAForms.html",width:700,height:500,buttons:[{text:"Insertar",onclick:function(){let b=a.windowManager.getWindows()[0],c=b.getContentWindow().document,d=getFormData($(c).find("#APABook"));d.type="book",moment(d.year).isValid()&&(d.year=moment(d.year).year()),a.insertContent(getContentAPA(d)),b.close()}},{text:"Cerrar",onclick:"close"}]},{apaFormat:"apaBook"})}},{icon:"none fontAwesome fa fa-map",text:"Cap\u00edtulo",onclick:function(){a.windowManager.open({title:"Generar citas APA para Cap\u00edtulo",url:b+"/management/APAForms.html",width:700,height:550,buttons:[{text:"Insertar",onclick:function(){let b=a.windowManager.getWindows()[0],c=b.getContentWindow().document,d=getFormData($(c).find("#APAChapter"));d.type="chapter",moment(d.year).isValid()&&(d.year=moment(d.year).year()),d.pages=[d.pageFrom,d.pageTo],a.insertContent(getContentAPA(d)),b.close()}},{text:"Cerrar",onclick:"close"}]},{apaFormat:"apaChapter"})}},{icon:"none fontAwesome fa fa-newspaper-o",text:"Peri\u00f3dico",onclick:function(){a.windowManager.open({title:"Generar citas APA para Peri\u00f3dico",url:b+"/management/APAForms.html",width:700,height:250,buttons:[{text:"Insertar",onclick:function(){let b=a.windowManager.getWindows()[0],c=b.getContentWindow().document,d=getFormData($(c).find("#APANewsPaper"));d.type="newspaper-article",moment(d.pubdate).isValid()&&(d.pubdate={from:[moment(d.pubdate).date(),moment(d.pubdate).month(),moment(d.pubdate).year()]}),d.pages=[d.pageFrom,d.pageTo],a.insertContent(getContentAPA(d)),b.close()}},{text:"Cerrar",onclick:"close"}]},{apaFormat:"apaNewsPaper"})}},{icon:"none fontAwesome fa fa-file-text-o",text:"Articulo",onclick:function(){a.windowManager.open({title:"Generar citas APA para Articulo",url:b+"/management/APAForms.html",width:700,height:330,buttons:[{text:"Insertar",onclick:function(){let b=a.windowManager.getWindows()[0],c=b.getContentWindow().document,d=getFormData($(c).find("#APAArticle"));d.type="article",moment(d.year).isValid()&&(d.year=moment(d.year).year()),d.pages=[d.pageFrom,d.pageTo],a.insertContent(getContentAPA(d)),b.close()}},{text:"Cerrar",onclick:"close"}]},{apaFormat:"apaArticle"})}},{icon:"none fontAwesome fa fa-file-text",text:"Articulo Electr",onclick:function(){a.windowManager.open({title:"Generar citas APA para Articulo Electr",url:b+"/management/APAForms.html",width:700,height:400,buttons:[{text:"Insertar",onclick:function(){let b=a.windowManager.getWindows()[0],c=b.getContentWindow().document,d=getFormData($(c).find("#APAEArticle"));d.type="e-article",d.pages=[d.pageFrom,d.pageTo],moment(d.year).isValid()&&(d.year=moment(d.year).year()),moment(d.date).isValid()&&(d.date={from:[moment(d.date).date(),moment(d.date).month(),moment(d.date).year()]}),a.insertContent(getContentAPA(d)),b.close()}},{text:"Cerrar",onclick:"close"}]},{apaFormat:"apaEArticle"})}},{icon:"none fontAwesome fa fa-file-o",text:"Documento",onclick:function(){a.windowManager.open({title:"Generar citas APA para Documento",url:b+"/management/APAForms.html",width:700,height:380,buttons:[{text:"Insertar",onclick:function(){let b=a.windowManager.getWindows()[0],c=b.getContentWindow().document,d=getFormData($(c).find("#APAPaper"));d.type="paper",d.conference={},d.conference.name=d.name,d.conference.org=d.org,d.conference.place=d.place,d.conference.country=d.country,a.insertContent(getContentAPA(d)),b.close()}},{text:"Cerrar",onclick:"close"}]},{apaFormat:"apaPaper"})}},{icon:"none fontAwesome fa fa-at",text:"Publicaci\u00f3n Electr",onclick:function(){a.windowManager.open({title:"Generar citas APA para Publicaci\u00f3n Electr",url:b+"/management/APAForms.html",width:700,height:350,buttons:[{text:"Insertar",onclick:function(){let b=a.windowManager.getWindows()[0],c=b.getContentWindow().document,d=getFormData($(c).find("#APAEPublication"));d.type="e-publication",moment(d.pubdate).isValid()&&(d.pubdate={from:[moment(d.pubdate).date(),moment(d.pubdate).month(),moment(d.pubdate).year()]}),moment(d.date).isValid()&&(d.date={from:[moment(d.date).date(),moment(d.date).month(),moment(d.date).year()]}),a.insertContent(getContentAPA(d)),b.close()}},{text:"Cerrar",onclick:"close"}]},{apaFormat:"apaEPublication"})}}]})});